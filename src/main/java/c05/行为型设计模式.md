## 观察者模式

观察者模式也被称为发布订阅模式，即： 在对象之间定义一个一对多的依赖，当一个对象状态改变的时候，所有依赖的对象都会总动通知。

[Demo](observable/Demo.java)

上述demo采用的是同步阻塞的实现方式,Observer和Subject的代码在同一个线程里执行,Subject只有for循环的update执行完之后才能执行后面的逻辑.

,如果Subject改动频繁,对性能比较敏感,希望notifyUpdate接口相应时间尽可能短,就需要采用异步非阻塞方式实现了

如何实现一个异步非阻塞的观察者模式呢?

简单的做法就是每个update使用一个新的线程去完成.而更优雅的实现方式就是借用Google Guava EventBus框架的设计思路了.

### 实现一个异步非阻塞的EventBus框架

[Subscribe](observable/eventbus/Subscribe.java) 是一个注解,用于标明观察者中的哪个函数用来接受消息.

[ObserverAction](observable/eventbus/ObserverAction.java) 类表示被注解的方法,其中target是观察者类,
method表示方法,主要用在ObserverRegistry的注册表记录信息.

[ObserverRegistry](observable/eventbus/ObserverRegistry.java)就是注册表,用来记录观察者类跟接受的postObject消息的映射.

[EventBus](observable/eventbus/EventBus.java)实现了阻塞同步的观察者模式;

[AsyncEventBus](observable/eventbus/AsyncEventBus.java) 其实就是EventBus的线程池模式实现
