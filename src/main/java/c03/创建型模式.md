## 单例模式

### 为什么使用单例模式

单例模式的需求很简单: 一个类只允许创建一次.那这个类就是单例模式,这种设计模式就是单例设计模式,简称单例模式.

### 不同写法的单例模式

#### 1. 饿汉式
[饿汉式](design-pattern/src/main/java/c03/singleton/IdGenerator01.java)

优点:
大型程序(生命周期较长)中,提前初始化能避免请求初始化资源导致请求超时.如果有问题能提前暴露问题.

缺点:
频繁启停的程序,会浪费时间准备单例资源.


[懒汉式](design-pattern/src/main/java/c03/singleton/IdGenerator02.java)

优点:
支持延时加载.
缺点:
加了一把大锁,导致这个函数的并发度很低.

[双重校验](design-pattern/src/main/java/c03/singleton/IdGenerator03.java)

优点: 支持延时加载,性能也还可以.

[静态内部类](design-pattern/src/main/java/c03/singleton/IdGenerator04.java)

静态内部类在外部类被加载的时候并不会被加载,只有在调用getInstance()方法的时候才会被加载,这个时候创建instance.
instance的唯一性和安全性都是由JVM来保证的.


[枚举类](design-pattern/src/main/java/c03/singleton/IdGenerator05.java)

> 1.为什么说支持懒加载的双重检测模式不比饿汉式更优?
> 
> 答: 饿汉式的缺点在于提前加载单例资源,项目开发阶段的频繁启停都要加载资源,可能会影响使用体验,但是对于一些大型项目,如果请求时加载,资源较大很可能导致该请求超时.
> 2.单例模式有其他替代方案吗?
> 比如，通过工厂模式、IOC 容器（比如 Spring IOC 容器）来保证，由程序员自己来保证（自己在编写代码的时候自己保证不要创建两个类对象）。

## 工厂模式

[简单工厂模式](design-pattern/src/main/java/c03/factory/simple/RuleConfigSource.java)

简单工厂模式的作用是将if逻辑推到了工厂类,更符合开闭原则.

[工厂方法模式](design-pattern/src/main/java/c03/factory/method)
